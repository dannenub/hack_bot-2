<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Aviator Predictor ‚Äî fixed mobile input</title>
  <style>
    :root{--bg:#071322;--card:#071827;--accent:#0ea5e9;--muted:#9fb4c8}
    *{box-sizing:border-box;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial}
    body{margin:0;min-height:100vh;background:linear-gradient(180deg,#031024,#071322);color:#e6f2f8;display:flex;align-items:center;justify-content:center;padding:18px}
    .app{width:1040px;max-width:100%;border-radius:14px;padding:20px;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent), var(--card);box-shadow:0 12px 40px rgba(2,6,23,0.7)}
    .card{background:rgba(255,255,255,0.02);padding:16px;border-radius:12px}
    .center{display:flex;flex-direction:column;gap:12px;align-items:center}
    input{font-family:inherit}
    input[type="tel"]{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:10px;border-radius:10px;color:inherit;width:100%;font-size:16px;text-align:center}
    button{background:var(--accent);border:0;padding:12px 14px;border-radius:10px;color:#04203b;cursor:pointer;font-weight:800;font-size:16px}
    .ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}
    .small{font-size:15px;color:var(--muted)}
    .hidden{display:none !important}
    .text-large{font-size:34px;font-weight:900;color:#f6c84b;margin-top:12px}
    /* basic responsive tweaks */
    @media(max-width:600px){
      body{padding:10px}
      .app{padding:14px}
      input[type="tel"]{font-size:18px;padding:12px}
      button{font-size:16px;padding:12px}
    }
  </style>
</head>
<body>
  <div class="app" role="application">
    <!-- START SCREEN (—Å–æ–∑–¥–∞—ë—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑) -->
    <div id="startCard" class="card" style="margin-bottom:12px">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
        <div>
          <div style="font-size:20px;font-weight:900">Bot –¥–ª—è BetAndYou</div>
          <div class="small">–í–≤–µ–¥–∏—Ç–µ ID (10 —Ü–∏—Ñ—Ä)</div>
        </div>
      </div>

      <div class="center">
        <!-- numeric keyboard on mobile: type=tel + inputmode -->
        <input id="userId" type="tel" inputmode="numeric" pattern="[0-9]*" maxlength="10" autocomplete="off" autocorrect="off" placeholder="ID (10 —Ü–∏—Ñ—Ä)" />
        <button id="enterBtn" style="width:100%;margin-top:6px">–í–æ–π—Ç–∏</button>
        <div class="small" style="margin-top:6px">–ü–æ–¥—Å–∫–∞–∑–∫–∏: –≤–≤–æ–¥–∏ —Ü–∏—Ñ—Ä—ã –ø–æ–¥—Ä—è–¥ ‚Äî –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –Ω–µ –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–∞—Ç—å.</div>
      </div>
    </div>

    <!-- PREDICT SCREEN (—Å–æ–∑–¥–∞—ë—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –∏ —Å–∫—Ä—ã—Ç) -->
    <div id="predictCard" class="card hidden">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
        <div style="font-size:20px;font-weight:900">üéØ Aviator Predictor</div>
        <div class="small">ID: <span id="displayId">‚Äî</span></div>
      </div>

      <div style="display:flex;gap:10px;align-items:center">
        <button id="predictBtn" style="flex:1">–ü—Ä–æ–≥–Ω–æ–∑</button>
        <button id="backBtn" class="ghost">–ù–∞–∑–∞–¥</button>
      </div>

      <div id="coefDisplay" class="text-large" aria-live="polite">‚Äî</div>

      <div id="historyBlock" style="margin-top:12px" class="small">
        <div style="font-weight:700;margin-bottom:6px">–ò—Å—Ç–æ—Ä–∏—è</div>
        <ul id="historyList" style="max-height:160px;overflow:auto;padding-left:14px;margin:0"></ul>
      </div>
    </div>

  </div>

  <script>
    // --- State ---
    let userId = "";
    let valid = false;
    let history = [];

    // --- Elements (query once) ---
    const startCard = document.getElementById('startCard');
    const predictCard = document.getElementById('predictCard');
    const userIdInput = document.getElementById('userId');
    const enterBtn = document.getElementById('enterBtn');
    const predictBtn = document.getElementById('predictBtn');
    const backBtn = document.getElementById('backBtn');
    const coefDisplay = document.getElementById('coefDisplay');
    const historyList = document.getElementById('historyList');
    const displayId = document.getElementById('displayId');

    // focus input immediately (but only once DOM is ready)
    userIdInput.focus();

    // Validate helper (no DOM re-creation)
    function validateId(v){
      return /^\d{10}$/.test(v);
    }

    // on input: update local variable and toggle enter button style ‚Äî DO NOT re-render whole screen!
    userIdInput.addEventListener('input', (e)=>{
      userId = e.target.value;
      valid = validateId(userId);
      if(valid){
        enterBtn.style.background = 'linear-gradient(90deg, var(--accent), #06b6d4)';
        enterBtn.style.color = '#04203b';
      } else {
        enterBtn.style.background = '';
        enterBtn.style.color = '';
      }
      // Important: do NOT replace the input element -> keyboard will not hide
    });

    // Allow Enter key on mobile/digital keyboard (some keyboards send Enter)
    userIdInput.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter'){
        e.preventDefault();
        attemptEnter();
      }
    });

    enterBtn.addEventListener('click', attemptEnter);

    function attemptEnter(){
      if(!valid){
        alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π ID –∏–∑ 10 —Ü–∏—Ñ—Ä.');
        userIdInput.focus(); // keep focus so keyboard remains
        return;
      }
      // show predictor screen
      displayId.textContent = userId;
      startCard.classList.add('hidden');
      predictCard.classList.remove('hidden');
      // focus not forced here (keyboard can be hidden intentionally)
    }

    backBtn.addEventListener('click', ()=>{
      predictCard.classList.add('hidden');
      startCard.classList.remove('hidden');
      // restore focus into input so user can continue typing without extra tap
      setTimeout(()=> userIdInput.focus(), 50);
    });

    // Predict button (simple simulation)
    predictBtn.addEventListener('click', ()=>{
      const r = Math.random();
      let c;
      if (r < 0.75) c = 1 + Math.random() * 2.5;
      else if (r < 0.95) c = 3.5 + Math.random() * 6.5;
      else c = 10 + Math.random() * 70;
      c = Number(c.toFixed(2));
      coefDisplay.textContent = c + 'x';
      const time = new Date().toLocaleTimeString();
      history.unshift({v: c, t: time});
      if(history.length>10) history.pop();
      renderHistory();
    });

    function renderHistory(){
      historyList.innerHTML = '';
      for(let h of history){
        const li = document.createElement('li');
        li.textContent = `${h.v}x ‚Ä¢ ${h.t}`;
        historyList.appendChild(li);
      }
    }
  </script>
</body>
</html>
